(this.webpackJsonpsmartbill=this.webpackJsonpsmartbill||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),i=n(6),o=n.n(i),l=(n(12),n(2)),u=(n(13),n(3)),s=n(4),f=(n(14),function(){return Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}),b=function(e){var t,n=e.label,r=e.name,i=e.type,o=e.onChange,u=Object(a.useState)(!1),s=Object(l.a)(u,2),b=s[0],d=s[1],j=i||"file",h=function(e){var n=t.result;o(r,n),d(!1)};return Object(c.jsxs)("div",{className:"inputContainer",children:[Object(c.jsx)("label",{children:n}),Object(c.jsx)("input",{className:"input",id:r,name:r,type:j,onChange:function(e){var n;"text"!==j?e.target.files&&0!==e.target.files.length&&null!==e.target.files[0]&&(d(!0),n=e.target.files[0],(t=new FileReader).onloadend=h,t.readAsText(n)):o(r,e.target.value)}}),b&&Object(c.jsx)(f,{})]})},d=[401,4111,403,404,408,413,4091,4092,418,419,461,462],j={name:"",doc401:"",acc4111:"",acc404:"",acc462:"",acc461:"",acc408:"",acc418:"",acc403:"",acc413:"",acc4091:"",acc4092:"",acc419:"",balanta:"",catalog:""},h=Object(s.a)({name:"",balanta:"",catalog:""},function(){var e={};return d.forEach((function(t){return e["acc".concat(t)]=""})),e}()),p=function(e){var t=e.onGenerate,n=e.onReset,r=Object(a.useState)(h),i=Object(l.a)(r,2),o=i[0],f=i[1],p=Object(a.useState)(!1),m=Object(l.a)(p,2),v=m[0],g=m[1];Object(a.useEffect)((function(){var e=o.name,t=o.balanta,n=o.acc401,c=o.acc4111,a=o.catalog;g(!(e&&n&&c&&t&&a))}),[o]);var O=function(e,t){f(Object(s.a)(Object(s.a)({},o),{},Object(u.a)({},e,t)))};return Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)(b,{name:"name",label:"Nume(scurt, fara spatii)",type:"text",onChange:O}),Object(c.jsx)(b,{name:"catalog",label:"Fisier Catalog Parteneri",onChange:O}),Object(c.jsx)(b,{name:"balanta",label:"Fisier Balanta",onChange:O}),d.map((function(e){return Object(c.jsx)(b,{name:"acc".concat(e),label:"Fisier ".concat(e),onChange:O},e)})),Object(c.jsxs)("div",{className:"buttonContainer",children:[Object(c.jsx)("button",{disabled:v,onClick:function(){t(o)},children:"Generate migration files"}),Object(c.jsx)("button",{onClick:function(){n(),f(j);for(var e=document.getElementsByClassName("input"),t=0;t<e.length;t++)e[t].value=null},children:"Reset inputs"})]})]})};var m=function(e){for(var t=[],n=e.split(/\r?\n/),c=3;c<n.length;c++){var a=n[c].split(","),r=a[0],i=a[2];r&&t.push([r.trim(),i.trim()])}return t.map((function(e,t){var n=function(e){for(var t=e.toString(),n="",c=0;c<6-t.length;c++)n+="0";return 110===e&&(console.log(t),console.log(n.concat(t))),n.concat(t)}(t+1);return[e[0],e[1],"401.".concat(n),"404.".concat(n),"462.".concat(n),"4111.".concat(n),"461.".concat(n),"408.".concat(n),"418.".concat(n),"403.".concat(n),"413.".concat(n),"4091.".concat(n),"4092.".concat(n),"419.".concat(n),"","","","","","","","","","","","",""]}))};function v(e){for(var t=e.length,n=0,c=!1,a=[],r="";n<t;)'"'!==e[n]||c?'"'===e[n]&&c?(c=!1,r+=e[n]):","===e[n]&&c||","!==e[n]||c?r+=e[n]:(a.push(r),r="",c=!1):(c=!0,r+=e[n]),n++;return a.push(r),a}var g=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null),o=Object(l.a)(i,2),u=o[0],s=o[1],f=Object(a.useState)(null),b=Object(l.a)(f,2),j=b[0],h=b[1],g=function(){var e=document.createElement("a"),t=new Blob([j],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="".concat(n,"Balanta.csv"),document.body.appendChild(e),e.click()};return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(p,{onGenerate:function(e){r(e.name);var t={};d.forEach((function(n){var c="acc".concat(n),a=e[c];t[c]=function(e,t,n){if(!e)return null;for(var c=e.split(/\r?\n/),a=[],r=t;r<c.length;r++){var i=c[r].split(",");(i=i.filter((function(e){return!!e}))).length===n&&a.push(i.slice(1,i.length).map((function(e){return e.trim()})))}return a}(a,14,8)}));for(var c=m(e.catalog),a=function(e){for(var t=e.split(/\r?\n/),n=[],c=1;c<t.length;c++)n.push(v(t[c]).map((function(e){return e.trim()})));for(var a=d.map((function(e){return e.toString()})),r=[],i=0;i<n.length;i++)a.includes(n[i][0])&&r.push(n[i][0]);return{cleanLines:n,presentAccounts:r}}(e.balanta),i=a.cleanLines,o=a.presentAccounts,l=!0,f=0;f<o.length;f++){var b="acc".concat(o[f]);e[b]||(l=!1)}if(l){var j=function(e,t,n){var c={};Object.keys(e).forEach((function(t){null===e[t]?c[t]=null:c[t]=e[t].map((function(e){return{name:e[0],siDebit:e[1],siCredit:e[2],rDebit:e[3],rCredit:e[4],sFlDebit:e[5],sFCredit:e[6]}}))}));var a={};d.forEach((function(e){a["acc".concat(e)]={}})),t.forEach((function(e){var t={name:e[0],cif:e[1],acc401:e[2],acc404:e[3],acc462:e[4],acc4111:e[5],acc461:e[6],acc408:e[7],acc418:e[8],acc403:e[9],acc413:e[10],acc4091:e[11],acc4092:e[12],acc419:e[13]};d.forEach((function(e){a["acc".concat(e)][t.name]=t["acc".concat(e)]}))}));for(var r=[],i=function(e){if(!c["acc".concat(e)])return null;var t=[];return c["acc".concat(e)].forEach((function(n){var c=a["acc".concat(e)][n.name];t.push([c,n.name,n.siDebit,n.siCredit,n.rDebit,n.rCredit,n.sFlDebit,n.sFCredit])})),t},o=[],l=[],u=0;u<n.length;u++){var s=n[u],f=[s[0],s[2],s[3],s[4],s[11],s[12],s[13],s[14]],b=s[0];if((!b||!b.includes("CLASA"))&&(!b||!b.includes("TOT")))if("441"!==b)if("4418"!==b){var j=i(b);j?r=r.concat(j):r.push(f)}else l=f;else o=f}if(o.length>0&&0===l.length)o[0]="4418",r.push(o);else if(o.length>0&&l.length>0){for(var h=2;h<l.length;h++)l[h]=parseInt(l[h])+parseInt(o[h]);r.push(l)}else 0===o.length&&l.length>0&&r.push(l);return r}(t,c,i),p="Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon".concat("\n").concat(c.map((function(e){return e.join("|")})).join("\n"));s(p);var O="Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare".concat("\n").concat(j.map((function(e){return e.join("|")})).join("\n")).replace(/"/g,"").replace(/,/g,"");h(O),function(){var e=document.createElement("a"),t=new Blob([u],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="".concat(n,"Catalog.csv"),document.body.appendChild(e),e.click()}(),g()}else window.alert("Conform balantei, este nevoie de fisiere pt conturile: ".concat(o.join(",")))},onReset:function(){s(null),h(null)}})})};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.78304adb.chunk.js.map