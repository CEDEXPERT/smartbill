(this.webpackJsonpsmartbill=this.webpackJsonpsmartbill||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(1),r=n.n(a),o=n(6),i=n.n(o),l=(n(12),n(2)),u=(n(13),n(3)),s=n(4),b=(n(14),function(){return Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}),f=function(t){var e,n=t.label,r=t.name,o=t.type,i=t.onChange,u=Object(a.useState)(!1),s=Object(l.a)(u,2),f=s[0],j=s[1],d=o||"file",h=function(t){var n=e.result;i(r,n),j(!1)};return Object(c.jsxs)("div",{className:"inputContainer",children:[Object(c.jsx)("label",{children:n}),Object(c.jsx)("input",{className:"input",id:r,name:r,type:d,onChange:function(t){var n;"text"!==d?t.target.files&&0!==t.target.files.length&&null!==t.target.files[0]&&(j(!0),n=t.target.files[0],(e=new FileReader).onloadend=h,e.readAsText(n)):i(r,t.target.value)}}),f&&Object(c.jsx)(b,{})]})},j=[401,4111,404,462,461,408,418,403,413,4091,4092,419],d={name:"",doc401:"",acc4111:"",acc404:"",acc462:"",acc461:"",acc408:"",acc418:"",acc403:"",acc413:"",acc4091:"",acc4092:"",acc419:"",balanta:"",catalog:""},h=Object(s.a)({name:"",balanta:"",catalog:""},function(){var t={};return j.forEach((function(e){return t["acc".concat(e)]=""})),t}()),m=function(t){var e=t.onGenerate,n=Object(a.useState)(h),r=Object(l.a)(n,2),o=r[0],i=r[1],b=Object(a.useState)(!1),m=Object(l.a)(b,2),p=m[0],v=m[1];Object(a.useEffect)((function(){var t=o.name,e=o.balanta,n=o.acc401,c=o.acc4111,a=o.catalog;v(!(t&&n&&c&&e&&a))}),[o]);var g=function(t,e){i(Object(s.a)(Object(s.a)({},o),{},Object(u.a)({},t,e)))};return Object(c.jsxs)("div",{className:"form",children:[Object(c.jsx)(f,{name:"name",label:"Nume(scurt, fara spatii)",type:"text",onChange:g}),Object(c.jsx)(f,{name:"catalog",label:"Fisier Catalog Parteneri",onChange:g}),Object(c.jsx)(f,{name:"balanta",label:"Fisier Balanta",onChange:g}),j.map((function(t){return Object(c.jsx)(f,{name:"acc".concat(t),label:"Fisier ".concat(t),onChange:g},t)})),Object(c.jsxs)("div",{className:"buttonContainer",children:[Object(c.jsx)("button",{disabled:p,onClick:function(){e(o)},children:"Import"}),Object(c.jsx)("button",{onClick:function(){i(d);for(var t=document.getElementsByClassName("input"),e=0;e<t.length;e++)t[e].value=null},children:"reset"})]})]})};var p=function(t){for(var e=[],n=t.split(/\r?\n/),c=3;c<n.length;c++){var a=n[c].split(","),r=a[0],o=a[2];r&&e.push([r.trim(),o.trim()])}return e.map((function(t,e){var n=function(t){for(var e=t.toString(),n="",c=0;c<6-e.length;c++)n+="0";return 110===t&&(console.log(e),console.log(n.concat(e))),n.concat(e)}(e+1);return[t[0],t[1],"401.".concat(n),"404.".concat(n),"462.".concat(n),"4111.".concat(n),"461.".concat(n),"408.".concat(n),"418.".concat(n),"403.".concat(n),"413.".concat(n),"4091.".concat(n),"4092.".concat(n),"419.".concat(n),"","","","","","","","","","","","",""]}))};function v(t){for(var e=t.length,n=0,c=!1,a=[],r="";n<e;)'"'!==t[n]||c?'"'===t[n]&&c?(c=!1,r+=t[n]):","===t[n]&&c||","!==t[n]||c?r+=t[n]:(a.push(r),r="",c=!1):(c=!0,r+=t[n]),n++;return a.push(r),a}var g=function(){var t=Object(a.useState)(""),e=Object(l.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(null),i=Object(l.a)(o,2),u=i[0],s=i[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),d=f[0],h=f[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(m,{onGenerate:function(t){r(t.name);var e={};j.forEach((function(n){var c="acc".concat(n),a=t[c];e[c]=function(t,e,n){if(!t)return null;for(var c=t.split(/\r?\n/),a=[],r=e;r<c.length;r++){var o=c[r].split(",");(o=o.filter((function(t){return!!t}))).length===n&&a.push(o.slice(1,o.length).map((function(t){return t.trim()})))}return a}(a,14,8)}));var n=p(t.catalog),c=function(t){for(var e=t.split(/\r?\n/),n=[],c=1;c<e.length;c++)n.push(v(e[c]).map((function(t){return t.trim()})));return n}(t.balanta),a=function(t,e,n){var c={};Object.keys(t).forEach((function(e){null===t[e]?c[e]=null:c[e]=t[e].map((function(t){return{name:t[0],siDebit:t[1],siCredit:t[2],rDebit:t[3],rCredit:t[4],sFlDebit:t[5],sFCredit:t[6]}}))}));var a={};j.forEach((function(t){a["acc".concat(t)]={}})),e.forEach((function(t){var e={name:t[0],cif:t[1],acc401:t[2],acc404:t[3],acc462:t[4],acc4111:t[5],acc461:t[6],acc408:t[7],acc418:t[8],acc403:t[9],acc413:t[10],acc4091:t[11],acc4092:t[12],acc419:t[13]};j.forEach((function(t){a["acc".concat(t)][e.name]=e["acc".concat(t)]}))}));for(var r=[],o=function(t){if(!c["acc".concat(t)])return null;var e=[];return c["acc".concat(t)].forEach((function(n){var c=a["acc".concat(t)][n.name];e.push([c,n.name,n.siDebit,n.siCredit,n.rDebit,n.rCredit,n.sFlDebit,n.sFCredit])})),e},i=[],l=[],u=0;u<n.length;u++){var s=n[u],b=[s[0],s[2],s[3],s[4],s[11],s[12],s[13],s[14]],f=s[0];if(!f||!f.includes("CLASA"))if("441"!==f)if("4418"!==f){var d=o(f);d?r=r.concat(d):r.push(b)}else l=b;else i=b}if(i.length>0&&0===l.length)i[0]="4418",r.push(i);else if(i.length>0&&l.length>0){for(var h=2;h<l.length;h++)l[h]=parseInt(l[h])+parseInt(i[h]);r.push(l)}else 0===i.length&&l.length>0&&r.push(l);return r}(e,n,c),o="Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon".concat("\n").concat(n.map((function(t){return t.join("|")})).join("\n"));s(o);var i="Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare".concat("\n").concat(a.map((function(t){return t.join("|")})).join("\n")).replace(/"/g,"").replace(/,/g,"");h(i)}}),Object(c.jsxs)("div",{className:"outputs",children:[Object(c.jsx)("button",{onClick:function(){var t=document.createElement("a"),e=new Blob([u],{type:"text/plain"});t.href=URL.createObjectURL(e),t.download="".concat(n,"Catalog.csv"),document.body.appendChild(t),t.click()},children:"Download fisier catalog"}),Object(c.jsx)("button",{onClick:function(){var t=document.createElement("a"),e=new Blob([d],{type:"text/plain"});t.href=URL.createObjectURL(e),t.download="".concat(n,"Balanta.csv"),document.body.appendChild(t),t.click()},children:"Download fisier balanta"})]})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7fa9d229.chunk.js.map