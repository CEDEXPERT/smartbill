{"version":3,"sources":["spinner/Spinner.js","smartbill/LabeledInput.js","constants.js","smartbill/Form.js","cleaner.js","smartbill/Instructions.js","App.js","generator.js","index.js"],"names":["Spinner","className","LabeledInput","fileReader","label","name","type","onChange","useState","loading","setLoading","inputType","handleFileRead","e","content","result","id","accept","file","target","files","length","FileReader","onloadend","readAsText","value","ACCOUNT_NUMBERS","initialState","doc401","acc4111","acc404","acc462","acc461","acc408","acc418","acc403","acc413","acc4091","acc4092","acc419","balanta","catalog","formInitialState","obj","forEach","n","ACCOUNTS_INITIAL_VALUE","Form","onGenerate","onReset","inputs","setInputs","disabled","setDisabled","useEffect","acc401","map","onClick","els","document","getElementsByClassName","i","splitLine","line","inString","parts","val","push","Instructions","href","App","company","setCompany","setCatalog","setBalanta","trezo","setTrezo","values","cleanAccounts","keyName","dirtyAcc","startLine","cols","lines","split","cleanLines","filter","slice","s","trim","cleanFile","fCatalog","clients","cif","client","index","c","str","toString","buf","concat","getCounter","cleanCatalog","requiredAccounts","presentAccounts","accNr","window","alert","includes","cleanBalanta","fBalanta","all","accounts","fileCatalogLines","fileBalantaLines","entitiesWithName","Object","keys","key","siDebit","siCredit","rDebit","rCredit","sFlDebit","sFCredit","mapAccounts","entity","linesToKeep","getAccountLines","linesForAcc","cod","row441","row4418","keep","startsWith","analyticLines","left","replace","right","parseFloat","generateBalanta","catalogFileContent","join","balantaFileContent","trezoFileContent","element","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","downloadCatalog","downloadBalanta","downloadTrezo","style","marginTop","fontSize","color","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.da9a64d7.chunk.js","sourcesContent":["import React from \"react\"\nimport \"./Spinner.css\"\n\nconst Spinner = () => {\n    return (\n        <div className=\"lds-ring\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    )\n}\n\nexport default Spinner\n","import React, { useState } from \"react\"\nimport Spinner from \"../spinner/Spinner\";\n\nconst LabeledInput = ( { label, name, type, onChange } ) => {\n    const [loading, setLoading] = useState(false)\n    let fileReader\n    const inputType = type ? type : \"file\"\n\n    const handleFileRead = (e) => {\n        const content = fileReader.result;\n        onChange(name, content)\n        setLoading(false)\n    };\n\n    const handleFileChosen = (file) => {\n        fileReader = new FileReader();\n        fileReader.onloadend = handleFileRead;\n        fileReader.readAsText(file);\n    };\n\n    const onInputChange = (e) => {\n        if (inputType === \"text\") {\n            onChange(name, e.target.value)\n            return\n        }\n        if (!e.target.files || e.target.files.length === 0 || e.target.files[0] === null)\n            return\n        setLoading(true)\n        handleFileChosen(e.target.files[0])\n    }\n\n\n    return (\n        <div className=\"inputContainer\">\n            <label>{label}</label>\n            <input className=\"input\" id={name} name={name} type={inputType} accept=\".csv\" onChange={onInputChange}/>\n            {loading && <Spinner/>}\n        </div>\n    )\n}\n\nexport default LabeledInput\n","export const ACCOUNT_NUMBERS = [\n    401,\n    4111,\n    403,\n    404,\n    408,\n    413,\n    4091,\n    4092,\n    418,\n    419,\n    461,\n    462\n]\n\nexport const ACCOUNTS_INITIAL_VALUE = () => {\n    const obj = {}\n    ACCOUNT_NUMBERS.forEach(n => obj[`acc${n}`] = '')\n    return obj\n}\n","import React, {useEffect, useState} from \"react\"\nimport LabeledInput from \"./LabeledInput\";\nimport {ACCOUNT_NUMBERS, ACCOUNTS_INITIAL_VALUE} from \"../constants\";\n\nconst initialState = {\n    name: '',\n    doc401: '',\n    acc4111: '',\n    acc404: '',\n    acc462: '',\n    acc461: '',\n    acc408: '',\n    acc418: '',\n    acc403: '',\n    acc413: '',\n    acc4091: '',\n    acc4092: '',\n    acc419: '',\n    balanta: '',\n    catalog: ''\n}\n\nconst formInitialState = {\n    name: '',\n    balanta: '',\n    catalog: '',\n    ...ACCOUNTS_INITIAL_VALUE()\n}\n\nconst Form = ( { onGenerate, onReset }) => {\n    const [inputs, setInputs] = useState(formInitialState)\n    const [disabled, setDisabled] = useState(false)\n\n    useEffect(() => {\n        const {name, balanta, acc401, acc4111, catalog } = inputs\n        if (!name || !acc401 || !acc4111 || !balanta || !catalog) {\n            setDisabled(true)\n        } else {\n            setDisabled(false)\n        }\n    }, [inputs])\n\n    const generate = () => {\n        onGenerate(inputs)\n    }\n\n    const onChange = (name, value) => {\n        setInputs({\n            ...inputs,\n            [name]: value\n        })\n    }\n    const reset = () => {\n        onReset()\n        setInputs(initialState)\n        const els = document.getElementsByClassName('input')\n        for (let i = 0; i < els.length; i++)\n            els[i].value = null\n\n    }\n\n    return (\n        <div className=\"form\">\n            <LabeledInput name=\"name\" label=\"Nume(scurt, fara spatii)\" type=\"text\" onChange={onChange}/>\n            <LabeledInput name=\"catalog\" label=\"Fisier Catalog Parteneri\" onChange={onChange}/>\n            <LabeledInput name=\"balanta\" label=\"Fisier Balanta\" onChange={onChange}/>\n            {\n                ACCOUNT_NUMBERS.map(n => (\n                    <LabeledInput key={n} name={`acc${n}`} label={`Fisier ${n}`} onChange={onChange}/>\n                ))\n            }\n            <div className=\"buttonContainer\">\n                <button disabled={disabled} onClick={generate}>Generate migration files</button>\n                <button onClick={reset}>Reset inputs</button>\n            </div>\n        </div>\n    )\n}\n\nexport default Form;\n","import {ACCOUNT_NUMBERS} from \"./constants\";\n\nconst START_LINE_4XX = 14\n\nconst cleanFile = (file, startLine, cols) => {\n    if (!file) return null\n    const lines = file.split(/\\r?\\n/);\n\n    const cleanLines = []\n\n    for (let i = startLine; i < lines.length; i++) {\n        let split = lines[i].split(',')\n        split = split.filter(i => !!i)\n\n        if (split.length === cols) {\n            cleanLines.push(split.slice(1, split.length).map(s => s.trim()))\n        }\n    }\n    return cleanLines\n}\n\nconst cleanAccountFile = (file) => cleanFile(file, START_LINE_4XX, 8)\n\nfunction getCounter(index) {\n    //000001\n    const str = index.toString()\n    let buf = ''\n    for (let i = 0; i < 6 - str.length; i++) {\n        buf += '0'\n    }\n    return buf.concat(str)\n}\n\nconst cleanCatalog = (catalog) => {\n    const clients = []\n    const lines = catalog.split(/\\r?\\n/);\n\n    for (let i = 3; i < lines.length; i++) {\n        let split = lines[i].split(',')\n        const name = split[0]\n        const cif = split[2]\n        if (!!name) {\n            clients.push([name.trim(), cif.trim()])\n        }\n    }\n    //Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon\n    return clients.map((client, index) => {\n        const c = getCounter(index + 1)\n        return [\n            client[0],\n            client[1],\n            `401.${c}`,\n            `404.${c}`,\n            `462.${c}`,\n            `4111.${c}`,\n            `461.${c}`,\n            `408.${c}`,\n            `418.${c}`,\n            `403.${c}`,\n            `413.${c}`,\n            `4091.${c}`,\n            `4092.${c}`,\n            `419.${c}`,\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            ''\n        ]\n\n    })\n}\n\nfunction splitLine(line) {\n    const length = line.length\n    let i = 0;\n    let inString = false\n    const parts = []\n    let val = ''\n\n    while (i < length) {\n        if (line[i] === \"\\\"\" && !inString) {\n            inString = true\n            val = val + line[i]\n        } else if (line[i] === \"\\\"\" && inString) {\n            inString = false\n            val = val + line[i]\n        }  else if (line[i] === ',' && inString) {\n            val = val + line[i]\n        } else if (line[i] === ',' && !inString) {\n            parts.push(val)\n            val = ''\n            inString = false\n        } else {\n            val = val + line[i]\n        }\n        i++\n    }\n    parts.push(val)\n    return parts\n}\n\nconst cleanBalanta = (balanta) => {\n    const lines = balanta.split(/\\r?\\n/)\n    const cleanLines = []\n    for (let i = 1; i < lines.length; i++) {\n        cleanLines.push(splitLine(lines[i]).map(s => s.trim()))\n    }\n\n    const requiredAccounts = ACCOUNT_NUMBERS.map(n => n.toString())\n\n    const presentAccounts = []\n\n    for (let i = 0; i < cleanLines.length; i++) {\n        const accNr = cleanLines[i][0]\n        if (accNr === '409') {\n            window.alert('Atentie. Exista in balanta contul 409 fara analitic. Vezi sectiunea Exceptii din Instructiuni pt detalii')\n        }\n        if (requiredAccounts.includes(accNr)) {\n            presentAccounts.push(accNr)\n        }\n    }\n\n    return {\n        cleanLines,\n        presentAccounts\n    };\n}\n\nexport {\n    cleanAccountFile,\n    cleanCatalog,\n    cleanBalanta\n}\n\n\n","const Instructions = () => {\n    return (\n        <>\n            <p className=\"subtitle\">Pregatim local un folder cu numele [FIRMA] Migrare Smarbill</p>\n            <p className=\"subtitle\">Pregatim in drive un folder \"[FIRMA] Migrare SBC 01.10.2020\" in folderul clientului</p>\n            <p className=\"subtitle\">Scoatem accesul clientului la folderul de mai sus</p>\n            <p className=\"subtitle\">1. Balanta de verificare:</p>\n            <ul>\n                {/*<li>Pregatim local un folder cu numele [FIRMA] Migrare SBC (1)</li>*/}\n                <li>Export din Prosoft balanta pe perioada 01.01.2020 - pana inclusiv luna precedenta (30.09.2020)  fata de cea preluata</li>\n                <ul>\n                    <li>Creare Raport > Doar 8/9 sau export XLS > Export Excel > Excel in stanga sus</li>\n                    <li>File name: [FIRMA]_Balanta_01.01.2020-30.09.2020</li>\n                </ul>\n                <li>Il incarcam in folderul denumit \"[FIRMA] Migrare SBC 01.10.2020\" in Drive in folderul clientului</li>\n                <li>Il deschidem si il descarcam in format .csv in folderul local</li>\n                <li>File -> Download As -> Comma Separated Values (.csv)</li>\n            </ul>\n            <p className=\"subtitle\">2. Parteneri</p>\n            <ul>\n                <li>Export din Prosoft</li>\n                <li>Catalog parteneri > Printare lista parteneri > Raport > Export To > CSV File > Text Separator , (virgula) > OK</li>\n                <li>Salvam in folderul local cu denumirea [FIRMA]_CATALOG_PARTENERI</li>\n            </ul>\n            <p className=\"subtitle\">3. Furnizori si clienti (NR_CONT 401 sau 4111)</p>\n            <ul>\n                <li>Export din Prosoft Fisa pe cont pe perioada 01.01.2020 - pana inclusiv luna precedenta (30.09.2020)  fata de cea preluata</li>\n                <li>NR_CONT > Balanta pe cont analitic > Globala > Balanta analitica > Export Report > Format \"Microsoft Exxcel (97-2003 (*xsls)\" > cu denumirea \" CEDEXPERT_Fisa[NR_CONT]</li>\n                <li>Il incarcam in folderul denumit \"[FIRMA] Migrare SBC 01.10.2020\" in Drive in folderul clientului</li>\n                <li>Il deschidem si il descarcam in format .csv in folderul local</li>\n                <li>File -> Download As -> Comma Separated Values (.csv)</li>\n            </ul>\n            <p className=\"subtitle\">4. Alte conturi - 403, 404, 408, 4091, 4092, 413, 418, 419</p>\n            <ul>\n                <li>Daca exista alte conturi din lista de mai sus in balanta, se urmeaza pt fiecare din ele aceeasi procedura ca pt 401/4111</li>\n                <li>Pro tip: Softul de migrare va detecta daca exista alte conturi, si va va atentiona</li>\n            </ul>\n            <p className=\"subtitle\">5. Obtinere fisiere migrate</p>\n            <ul>\n                <li>Incarcam din folderul local fisierele .csv in campurile potrivite </li>\n                <li>Click pe \"Generate Migration Files\"</li>\n                <li>Click pe \"Download migration files\"</li>\n                <li>Salvam local fisierele primite</li>\n                <li>In modelul de trezorerie de\n                    <a href=\"https://docs.google.com/spreadsheets/d/1gLmwB8q2gE_DZnKKk3Le8832-5Fz3av-can0-GwCIz4/edit?usp=sharing\" target=\"_blank\">\n                        aici\n                    </a> completam cate un rand pt fiecare cont din lista primita din pasul precedent\n                </li>\n                <li>Se descarca fisierul trezo (format xslx) in folderul local</li>\n            </ul>\n            <p className=\"subtitle\">6. Import in smartbill</p>\n            <ul>\n                <li>Create client prin formularul smartbill (input CUI)</li>\n                <li>Accesam contabilitate pt clientul dorit</li>\n                <li>Configurari -> Importa date initiale -> Importa din excel</li>\n                <li>Se selecteaza luna cu care incepe utilizarea</li>\n                <li>Se incarca fisierele obtinute la pasul 5</li>\n                <li>Pt fiecare fisier se apasa butonul \"Incarca si valideaza\" </li>\n                <li>Se apasa butonul \"Importa datele\"</li>\n            </ul>\n            <p className=\"subtitle\">7. Verificare</p>\n            <ul>\n                <li>Se intra in Smartbill la Rapoarte -> Balanta -> Perioada data importului -> Tip balanta Analitica -> Afiseaza</li>\n                <li>Se verifica Totalul General cu balanta importata din ProSoft</li>\n                <li>Se deschide sampania</li>\n            </ul>\n            <p className=\"subtitle\">8. Exceptii</p>\n            <ul>\n                <li>Daca in balanta exista contul 409 fara analitic, se va importa la sectiunea din aplicatie(4091 sau 4092)\n                    caruia ii apartine conform inregistrarilor din 409 si se modifica manual in balanta\n                </li>\n            </ul>\n        </>\n    )\n}\n\nexport default Instructions\n","import React, {useState} from \"react\"\nimport './App.css';\nimport Form from \"./smartbill/Form\";\nimport {cleanAccountFile, cleanBalanta, cleanCatalog} from \"./cleaner\";\nimport {generateBalanta} from \"./generator\";\nimport {ACCOUNT_NUMBERS} from \"./constants\";\nimport Instructions from \"./smartbill/Instructions\";\n\nconst catalogHeader = 'Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon'\nconst balantaHeader = 'Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare'\nconst trezoHeader = 'Contul Contabil'\n\nconst App = () => {\n\n  const [company, setCompany] = useState('')\n  const [catalog, setCatalog ] = useState(null)\n  const [balanta, setBalanta ] = useState(null)\n  const [trezo, setTrezo] = useState(null)\n\n  const reset = () => {\n    setCatalog(null)\n    setBalanta(null)\n    setTrezo(null)\n  }\n\n  const downloadCatalog = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([catalog], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Catalog.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n\n  const downloadBalanta = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([balanta], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Balanta.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n  const downloadTrezo = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([trezo], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Trezo.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n\n  const generate = (values) => {\n    setCompany(values.name)\n\n    const cleanAccounts = {}\n\n    ACCOUNT_NUMBERS.forEach(n => {\n      const keyName = `acc${n}`\n      const dirtyAcc = values[keyName]\n      cleanAccounts[keyName] = cleanAccountFile(dirtyAcc)\n    })\n\n    const fCatalog = cleanCatalog(values.catalog)\n    const { cleanLines: fBalanta, presentAccounts } = cleanBalanta(values.balanta)\n\n    let all = true\n    for (let i = 0; i < presentAccounts.length; i++) {\n      const keyName = `acc${presentAccounts[i]}`\n      if (!values[keyName]) {\n        all = false\n      }\n    }\n\n    if (!all) {\n      window.alert(`Conform balantei, este nevoie de fisiere pt conturile: ${presentAccounts.join(\",\")}`)\n      return\n    }\n\n    const { balanta, trezo } = generateBalanta(cleanAccounts, fCatalog, fBalanta)\n\n    const catalogFileContent = catalogHeader\n        .concat('\\n')\n        .concat(fCatalog.map(line => line.join('|')).join('\\n'))\n\n    setCatalog(catalogFileContent)\n\n    const balantaFileContent = balantaHeader\n        .concat('\\n')\n        .concat(balanta.map(line => line.join('|')).join('\\n'))\n        .replace(/\"/g,'')\n        .replace(/,/g, '')\n    setBalanta(balantaFileContent)\n\n    const trezoFileContent = trezoHeader\n        .concat('\\n')\n        .concat(trezo.join('\\n'))\n        .replace(/\"/g,'')\n\n    setTrezo(trezoFileContent)\n\n  }\n\n  const downloadFiles = () => {\n    downloadCatalog()\n    downloadBalanta()\n    downloadTrezo()\n  }\n\n\n\n  return (\n    <div className=\"App\">\n      <div className=\"left\">\n      <Form onGenerate={generate} onReset={reset}/>\n      <div className=\"outputs\">\n        <button disabled={catalog === null} onClick={downloadFiles}>Download migration files</button>\n        {/*<button disabled={balanta === null} onClick={downloadBalanta}>Download fisier balanta</button>*/}\n        {/*<button disabled={trezo === null} onClick={downloadTrezo}>Download fisier Trezo</button>*/}\n      </div>\n      <span style={{marginTop: '50px', fontSize: '12px', color: 'white'}}>v0.13</span>\n    </div>\n      <div className=\"right\">\n        <p>Instructiuni</p>\n        <Instructions/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/*\n\n */\n\nimport {ACCOUNT_NUMBERS} from \"./constants\";\n\n/*\n      const keyName = `acc${n}`\n      cleanAccounts[keyName]\n */\n\nexport const generateBalanta = (accounts, fileCatalogLines, fileBalantaLines) => {\n    const entitiesWithName = {}\n    Object.keys(accounts).forEach(key => {\n        if (accounts[key] === null) {\n            entitiesWithName[key] = null\n        } else {\n            entitiesWithName[key] = accounts[key].map(split => ({\n                name: split[0],\n                siDebit: split[1],\n                siCredit: split[2],\n                rDebit: split[3],\n                rCredit: split[4],\n                sFlDebit: split[5],\n                sFCredit: split[6]\n            }))\n\n        }\n    })\n\n    const mapAccounts = {}\n    ACCOUNT_NUMBERS.forEach(n => {\n        mapAccounts[`acc${n}`] = {}\n    })\n\n    /*\n     0      client[0],\n     1      client[1],\n\n     2      `401.${c}`,\n\n     3      `404.${c}`,\n\n     4      `462.${c}`,\n\n     5      `4111.${c}`,\n\n     6      `461.${c}`,\n\n     7      `408.${c}`,\n\n     8      `418.${c}`,\n\n     9      `403.${c}`,\n\n     10      `413.${c}`,\n\n     11      `4091.${c}`,\n\n     12      `4092.${c}`,\n\n     13      `419.${c}`,\n\n     */\n\n    fileCatalogLines.forEach(split => {\n        const entity = {\n            name: split[0],\n            cif: split[1],\n            acc401: split[2],\n            acc404: split[3],\n            acc462: split[4],\n            acc4111: split[5],\n            acc461: split[6],\n            acc408: split[7],\n            acc418: split[8],\n            acc403: split[9],\n            acc413: split[10],\n            acc4091: split[11],\n            acc4092: split[12],\n            acc419: split[13],\n        }\n        ACCOUNT_NUMBERS.forEach(n => {\n            mapAccounts[`acc${n}`][entity.name] = entity[`acc${n}`]\n        })\n    })\n\n    // Reading Balanta file\n    // 0 Cont\n    // 1 AP\n    // 2 Den_cont\n    // 3 SIAD\n    // 4 SIAC\n    // 5 RPD\n    // 6 RPC\n    // 7 RLCD\n    // 8 RLCC\n    // 9 RCD\n    // 10 RCC\n    // 11 TVD\n    // 12 TVC\n    // 13 SFD\n    // 14 SFC\n    // 15 Unitate\n\n    let linesToKeep = []\n\n    const getAccountLines = (n) => {\n        if (!entitiesWithName[`acc${n}`])\n            return null\n        const linesForAcc = []\n        entitiesWithName[`acc${n}`].forEach(client => {\n            const cod = mapAccounts[`acc${n}`][client.name]\n            linesForAcc.push([cod, client.name, client.siDebit,\n                client.siCredit, client.rDebit,\n                client.rCredit, client.sFlDebit,\n                client.sFCredit])\n        })\n        return linesForAcc\n    }\n\n    let row441 = []\n    let row4418 = []\n\n    const trezo = []\n\n    for (let i = 0; i < fileBalantaLines.length; i++) {\n        const split = fileBalantaLines[i]\n        const keep = [split[0], split[2], split[3], split[4], split[11], split[12], split[13], split[14]]\n\n        const accNr = split[0]\n\n        if (accNr && accNr.includes('CLASA')) {\n            continue\n        }\n\n        if (accNr && accNr.includes('TOT')) {\n            continue\n        }\n\n        // 408D pastram\n        // 5121.1 pastram\n        // pastram randurile din balanta care au conturile de genul 408D? DA\n        // 441 trece in 4418\n\n        if (accNr === '441') {\n            row441 = keep\n            continue\n        }\n\n        if (accNr === '4418') {\n            row4418 = keep\n            continue\n        }\n\n        if (accNr === '5121') {\n            keep[0] = '5121.001'\n        }\n\n        if (accNr === '5124') {\n            keep[0] = '5124.001'\n        }\n\n        if (accNr.startsWith('5') && accNr !== '581' && accNr !== '5311') {\n            trezo.push(keep[0])\n        }\n\n        const analyticLines = getAccountLines(accNr)\n        if (analyticLines) {\n            linesToKeep = linesToKeep.concat(analyticLines)\n        } else {\n            linesToKeep.push(keep)\n        }\n    }\n\n    if (row441.length > 0 && row4418.length === 0) {\n        row441[0] = '4418'\n        linesToKeep.push(row441)\n    } else if (row441.length > 0 && row4418.length > 0) {\n        for (let i = 2; i < row4418.length; i++) {\n            const left = row4418[i].replace(/\"/g, \"\").replace(/,/g, \"\")\n            const right = row441[i].replace(/\"/g, \"\").replace(/,/g, \"\")\n            row4418[i] = parseFloat(left) + parseFloat(right)\n        }\n        linesToKeep.push(row4418)\n    } else if (row441.length === 0 && row4418.length > 0) {\n        linesToKeep.push(row4418)\n    }\n\n    return {\n        balanta: linesToKeep,\n        trezo\n    }\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}