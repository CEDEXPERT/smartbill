(this.webpackJsonpsmartbill=this.webpackJsonpsmartbill||[]).push([[0],{12:function(t,c,n){},13:function(t,c,n){},14:function(t,c,n){},15:function(t,c,n){"use strict";n.r(c);var e=n(0),a=n(1),r=n.n(a),o=n(6),i=n.n(o),l=(n(12),n(2)),u=(n(13),n(3)),s=n(4),b=(n(14),function(){return Object(e.jsxs)("div",{className:"lds-ring",children:[Object(e.jsx)("div",{}),Object(e.jsx)("div",{}),Object(e.jsx)("div",{}),Object(e.jsx)("div",{})]})}),f=function(t){var c,n=t.label,r=t.name,o=t.type,i=t.onChange,u=Object(a.useState)(!1),s=Object(l.a)(u,2),f=s[0],d=s[1],j=o||"file",m=function(t){var n=c.result;i(r,n),d(!1)};return Object(e.jsxs)("div",{className:"inputContainer",children:[Object(e.jsx)("label",{children:n}),Object(e.jsx)("input",{className:"input",id:r,name:r,type:j,onChange:function(t){var n;"text"!==j?t.target.files&&0!==t.target.files.length&&null!==t.target.files[0]&&(d(!0),n=t.target.files[0],(c=new FileReader).onloadend=m,c.readAsText(n)):i(r,t.target.value)}}),f&&Object(e.jsx)(b,{})]})},d=[401,4111,404,462,461,408,418,403,413,4091,4092,419],j={name:"",doc401:"",acc4111:"",acc404:"",acc462:"",acc461:"",acc408:"",acc418:"",acc403:"",acc413:"",acc4091:"",acc4092:"",acc419:"",balanta:"",catalog:""},m=Object(s.a)({name:"",balanta:"",catalog:""},function(){var t={};return d.forEach((function(c){return t["acc".concat(c)]=""})),t}()),h=function(t){var c=t.onGenerate,n=Object(a.useState)(m),r=Object(l.a)(n,2),o=r[0],i=r[1],b=Object(a.useState)(!1),h=Object(l.a)(b,2),v=h[0],p=h[1];Object(a.useEffect)((function(){var t=o.name,c=o.balanta,n=o.acc401,e=o.acc4111,a=o.catalog;p(!(t&&n&&e&&c&&a))}),[o]);var O=function(t,c){i(Object(s.a)(Object(s.a)({},o),{},Object(u.a)({},t,c)))};return Object(e.jsxs)("div",{className:"form",children:[Object(e.jsx)(f,{name:"name",label:"Nume(scurt, fara spatii)",type:"text",onChange:O}),Object(e.jsx)(f,{name:"catalog",label:"Fisier Catalog",onChange:O}),Object(e.jsx)(f,{name:"balanta",label:"Fisier Balanta",onChange:O}),d.map((function(t){return Object(e.jsx)(f,{name:"acc".concat(t),label:"Fisier ".concat(t),onChange:O},t)})),Object(e.jsxs)("div",{className:"buttonContainer",children:[Object(e.jsx)("button",{disabled:v,onClick:function(){c(o)},children:"Import"}),Object(e.jsx)("button",{onClick:function(){i(j);for(var t=document.getElementsByClassName("input"),c=0;c<t.length;c++)t[c].value=null},children:"reset"})]})]})};var v=function(t){for(var c=[],n=t.split(/\r?\n/),e=3;e<n.length;e++){var a=n[e].split(","),r=a[0],o=a[2];r&&c.push([r.trim(),o.trim()])}return c.map((function(t,c){var n=function(t){for(var c=t.toString(),n="",e=0;e<6-c.length;e++)n+="0";return 110===t&&(console.log(c),console.log(n.concat(c))),n.concat(c)}(c+1);return[t[0],t[1],"401.".concat(n),"404.".concat(n),"462.".concat(n),"4111.".concat(n),"461.".concat(n),"408.".concat(n),"418.".concat(n),"403.".concat(n),"413.".concat(n),"4091.".concat(n),"4092.".concat(n),"419.".concat(n),"","","","","","","","","","","","",""]}))};function p(t){for(var c=t.length,n=0,e=!1,a=[],r="";n<c;)'"'!==t[n]||e?'"'===t[n]&&e?(e=!1,r+=t[n]):","===t[n]&&e||","!==t[n]||e?r+=t[n]:(a.push(r),r="",e=!1):(e=!0,r+=t[n]),n++;return a.push(r),a}var O=function(){var t=Object(a.useState)(""),c=Object(l.a)(t,2),n=c[0],r=c[1],o=Object(a.useState)(null),i=Object(l.a)(o,2),u=i[0],s=i[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),j=f[0],m=f[1];return Object(e.jsxs)("div",{className:"App",children:[Object(e.jsx)(h,{onGenerate:function(t){r(t.name);var c={};d.forEach((function(n){var e="acc".concat(n),a=t[e];c[e]=function(t,c,n){if(!t)return null;for(var e=t.split(/\r?\n/),a=[],r=c;r<e.length;r++){var o=e[r].split(",");(o=o.filter((function(t){return!!t}))).length===n&&a.push(o.slice(1,o.length).map((function(t){return t.trim()})))}return a}(a,14,8)}));var n=v(t.catalog),e=function(t){for(var c=t.split(/\r?\n/),n=[],e=1;e<c.length;e++)n.push(p(c[e]).map((function(t){return t.trim()})));return n}(t.balanta),a=function(t,c,n){var e={};Object.keys(t).forEach((function(c){null===t[c]?e[c]=null:e[c]=t[c].map((function(t){return{name:t[0],siDebit:t[1],siCredit:t[2],rDebit:t[3],rCredit:t[4],sFlDebit:t[5],sFCredit:t[6]}}))}));var a={};d.forEach((function(t){a["acc".concat(t)]={}})),c.forEach((function(t){var c={name:t[0],cif:t[1],acc401:t[2],acc404:t[3],acc462:t[4],acc4111:t[5],acc461:t[6],acc408:t[7],acc418:t[8],acc403:t[9],acc413:t[10],acc4091:t[11],acc4092:t[12],acc419:t[13]};d.forEach((function(t){a["acc".concat(t)][c.name]=c["acc".concat(t)]}))}));for(var r=[],o=function(t){if(!e["acc".concat(t)])return null;var c=[];return e["acc".concat(t)].forEach((function(n){var e=a["acc".concat(t)][n.name];c.push([e,n.name,n.siDebit,n.siCredit,n.rDebit,n.rCredit,n.sFlDebit,n.sFCredit])})),c},i=0;i<n.length;i++){var l=n[i],u=[l[0],l[2],l[3],l[4],l[11],l[12],l[13],l[14]],s=l[0];if(!s||!s.includes("CLASA")){var b=o(s);b?r=r.concat(b):r.push(u)}}return r}(c,n,e),o="Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon".concat("\n").concat(n.map((function(t){return t.join("|")})).join("\n"));s(o);var i="Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare".concat("\n").concat(a.map((function(t){return t.join("|")})).join("\n")).replace(/"/g,"").replace(/,/g,"");m(i)}}),Object(e.jsxs)("div",{className:"outputs",children:[Object(e.jsx)("button",{onClick:function(){var t=document.createElement("a"),c=new Blob([u],{type:"text/plain"});t.href=URL.createObjectURL(c),t.download="".concat(n,"Catalog.csv"),document.body.appendChild(t),t.click()},children:"Download fisier catalog"}),Object(e.jsx)("button",{onClick:function(){var t=document.createElement("a"),c=new Blob([j],{type:"text/plain"});t.href=URL.createObjectURL(c),t.download="".concat(n,"Balanta.csv"),document.body.appendChild(t),t.click()},children:"Download fisier balanta"})]})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(c){var n=c.getCLS,e=c.getFID,a=c.getFCP,r=c.getLCP,o=c.getTTFB;n(t),e(t),a(t),r(t),o(t)}))};i.a.render(Object(e.jsx)(r.a.StrictMode,{children:Object(e.jsx)(O,{})}),document.getElementById("root")),g()}},[[15,1,2]]]);
//# sourceMappingURL=main.c1c1806d.chunk.js.map