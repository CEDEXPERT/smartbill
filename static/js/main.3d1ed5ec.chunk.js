(this.webpackJsonpsmartbill=this.webpackJsonpsmartbill||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(1),r=n.n(c),i=n(6),o=n.n(i),l=(n(12),n(2)),u=(n(13),n(3)),s=n(4),b=(n(14),function(){return Object(a.jsxs)("div",{className:"lds-ring",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})}),f=function(t){var e,n=t.label,r=t.name,i=t.type,o=t.onChange,u=Object(c.useState)(!1),s=Object(l.a)(u,2),f=s[0],d=s[1],j=i||"file",h=function(t){var n=e.result;o(r,n),d(!1)};return Object(a.jsxs)("div",{className:"inputContainer",children:[Object(a.jsx)("label",{children:n}),Object(a.jsx)("input",{className:"input",id:r,name:r,type:j,onChange:function(t){var n;"text"!==j?t.target.files&&0!==t.target.files.length&&null!==t.target.files[0]&&(d(!0),n=t.target.files[0],(e=new FileReader).onloadend=h,e.readAsText(n)):o(r,t.target.value)}}),f&&Object(a.jsx)(b,{})]})},d=[401,4111,404,462,461,408,418,403,413,4091,4092,419],j={name:"",doc401:"",acc4111:"",acc404:"",acc462:"",acc461:"",acc408:"",acc418:"",acc403:"",acc413:"",acc4091:"",acc4092:"",acc419:"",balanta:"",catalog:""},h=Object(s.a)({name:"",balanta:"",catalog:""},function(){var t={};return d.forEach((function(e){return t["acc".concat(e)]=""})),t}()),m=function(t){var e=t.onGenerate,n=t.onReset,r=Object(c.useState)(h),i=Object(l.a)(r,2),o=i[0],b=i[1],m=Object(c.useState)(!1),p=Object(l.a)(m,2),v=p[0],g=p[1];Object(c.useEffect)((function(){var t=o.name,e=o.balanta,n=o.acc401,a=o.acc4111,c=o.catalog;g(!(t&&n&&a&&e&&c))}),[o]);var O=function(t,e){b(Object(s.a)(Object(s.a)({},o),{},Object(u.a)({},t,e)))};return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)(f,{name:"name",label:"Nume(scurt, fara spatii)",type:"text",onChange:O}),Object(a.jsx)(f,{name:"catalog",label:"Fisier Catalog Parteneri",onChange:O}),Object(a.jsx)(f,{name:"balanta",label:"Fisier Balanta",onChange:O}),d.map((function(t){return Object(a.jsx)(f,{name:"acc".concat(t),label:"Fisier ".concat(t),onChange:O},t)})),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)("button",{disabled:v,onClick:function(){e(o)},children:"Generate migration files"}),Object(a.jsx)("button",{onClick:function(){n(),b(j);for(var t=document.getElementsByClassName("input"),e=0;e<t.length;e++)t[e].value=null},children:"Reset inputs"})]})]})};var p=function(t){for(var e=[],n=t.split(/\r?\n/),a=3;a<n.length;a++){var c=n[a].split(","),r=c[0],i=c[2];r&&e.push([r.trim(),i.trim()])}return e.map((function(t,e){var n=function(t){for(var e=t.toString(),n="",a=0;a<6-e.length;a++)n+="0";return 110===t&&(console.log(e),console.log(n.concat(e))),n.concat(e)}(e+1);return[t[0],t[1],"401.".concat(n),"404.".concat(n),"462.".concat(n),"4111.".concat(n),"461.".concat(n),"408.".concat(n),"418.".concat(n),"403.".concat(n),"413.".concat(n),"4091.".concat(n),"4092.".concat(n),"419.".concat(n),"","","","","","","","","","","","",""]}))};function v(t){for(var e=t.length,n=0,a=!1,c=[],r="";n<e;)'"'!==t[n]||a?'"'===t[n]&&a?(a=!1,r+=t[n]):","===t[n]&&a||","!==t[n]||a?r+=t[n]:(c.push(r),r="",a=!1):(a=!0,r+=t[n]),n++;return c.push(r),c}var g=function(){var t=Object(c.useState)(""),e=Object(l.a)(t,2),n=e[0],r=e[1],i=Object(c.useState)(null),o=Object(l.a)(i,2),u=o[0],s=o[1],b=Object(c.useState)(null),f=Object(l.a)(b,2),j=f[0],h=f[1],g=function(){var t=document.createElement("a"),e=new Blob([u],{type:"text/plain"});t.href=URL.createObjectURL(e),t.download="".concat(n,"Catalog.csv"),document.body.appendChild(t),t.click()},O=function(){var t=document.createElement("a"),e=new Blob([j],{type:"text/plain"});t.href=URL.createObjectURL(e),t.download="".concat(n,"Balanta.csv"),document.body.appendChild(t),t.click()};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(m,{onGenerate:function(t){r(t.name);var e={};d.forEach((function(n){var a="acc".concat(n),c=t[a];e[a]=function(t,e,n){if(!t)return null;for(var a=t.split(/\r?\n/),c=[],r=e;r<a.length;r++){var i=a[r].split(",");(i=i.filter((function(t){return!!t}))).length===n&&c.push(i.slice(1,i.length).map((function(t){return t.trim()})))}return c}(c,14,8)}));var n=p(t.catalog),a=function(t){for(var e=t.split(/\r?\n/),n=[],a=1;a<e.length;a++)n.push(v(e[a]).map((function(t){return t.trim()})));return n}(t.balanta),c=function(t,e,n){var a={};Object.keys(t).forEach((function(e){null===t[e]?a[e]=null:a[e]=t[e].map((function(t){return{name:t[0],siDebit:t[1],siCredit:t[2],rDebit:t[3],rCredit:t[4],sFlDebit:t[5],sFCredit:t[6]}}))}));var c={};d.forEach((function(t){c["acc".concat(t)]={}})),e.forEach((function(t){var e={name:t[0],cif:t[1],acc401:t[2],acc404:t[3],acc462:t[4],acc4111:t[5],acc461:t[6],acc408:t[7],acc418:t[8],acc403:t[9],acc413:t[10],acc4091:t[11],acc4092:t[12],acc419:t[13]};d.forEach((function(t){c["acc".concat(t)][e.name]=e["acc".concat(t)]}))}));for(var r=[],i=function(t){if(!a["acc".concat(t)])return null;var e=[];return a["acc".concat(t)].forEach((function(n){var a=c["acc".concat(t)][n.name];e.push([a,n.name,n.siDebit,n.siCredit,n.rDebit,n.rCredit,n.sFlDebit,n.sFCredit])})),e},o=[],l=[],u=0;u<n.length;u++){var s=n[u],b=[s[0],s[2],s[3],s[4],s[11],s[12],s[13],s[14]],f=s[0];if(!f||!f.includes("CLASA"))if("441"!==f)if("4418"!==f){var j=i(f);j?r=r.concat(j):r.push(b)}else l=b;else o=b}if(o.length>0&&0===l.length)o[0]="4418",r.push(o);else if(o.length>0&&l.length>0){for(var h=2;h<l.length;h++)l[h]=parseInt(l[h])+parseInt(o[h]);r.push(l)}else 0===o.length&&l.length>0&&r.push(l);return r}(e,n,a),i="Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon".concat("\n").concat(n.map((function(t){return t.join("|")})).join("\n"));s(i);var o="Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare".concat("\n").concat(c.map((function(t){return t.join("|")})).join("\n")).replace(/"/g,"").replace(/,/g,"");h(o),g(),O()},onReset:function(){s(null),h(null)}}),Object(a.jsxs)("div",{className:"outputs",children:[Object(a.jsx)("button",{disabled:null===u,onClick:g,children:"Download fisier catalog"}),Object(a.jsx)("button",{disabled:null===j,onClick:O,children:"Download fisier balanta"})]})]})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3d1ed5ec.chunk.js.map