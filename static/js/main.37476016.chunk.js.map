{"version":3,"sources":["spinner/Spinner.js","smartbill/LabeledInput.js","constants.js","smartbill/Form.js","cleaner.js","smartbill/Instructions.js","App.js","generator.js","index.js"],"names":["Spinner","className","LabeledInput","fileReader","label","name","type","onChange","useState","loading","setLoading","inputType","handleFileRead","e","content","result","id","accept","file","target","files","length","FileReader","onloadend","readAsText","value","ACCOUNT_NUMBERS","initialState","doc401","acc4111","acc404","acc462","acc461","acc408","acc418","acc403","acc413","acc4091","acc4092","acc419","balanta","catalog","formInitialState","obj","forEach","n","ACCOUNTS_INITIAL_VALUE","Form","onGenerate","onReset","inputs","setInputs","disabled","setDisabled","useEffect","acc401","map","onClick","els","document","getElementsByClassName","i","cleanCatalog","clients","lines","split","cif","push","trim","client","index","c","str","toString","buf","console","log","concat","getCounter","splitLine","line","inString","parts","val","Instructions","href","App","company","setCompany","setCatalog","setBalanta","trezo","setTrezo","values","cleanAccounts","keyName","dirtyAcc","startLine","cols","cleanLines","filter","slice","s","cleanFile","fCatalog","requiredAccounts","presentAccounts","includes","cleanBalanta","fBalanta","all","accounts","fileCatalogLines","fileBalantaLines","entitiesWithName","Object","keys","key","siDebit","siCredit","rDebit","rCredit","sFlDebit","sFCredit","mapAccounts","entity","linesToKeep","getAccountLines","linesForAcc","cod","row441","row4418","keep","accNr","startsWith","analyticLines","left","replace","right","parseFloat","generateBalanta","catalogFileContent","join","balantaFileContent","trezoFileContent","window","alert","element","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","downloadCatalog","downloadBalanta","downloadTrezo","style","marginTop","fontSize","color","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.37476016.chunk.js","sourcesContent":["import React from \"react\"\nimport \"./Spinner.css\"\n\nconst Spinner = () => {\n    return (\n        <div className=\"lds-ring\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    )\n}\n\nexport default Spinner\n","import React, { useState } from \"react\"\nimport Spinner from \"../spinner/Spinner\";\n\nconst LabeledInput = ( { label, name, type, onChange } ) => {\n    const [loading, setLoading] = useState(false)\n    let fileReader\n    const inputType = type ? type : \"file\"\n\n    const handleFileRead = (e) => {\n        const content = fileReader.result;\n        onChange(name, content)\n        setLoading(false)\n    };\n\n    const handleFileChosen = (file) => {\n        fileReader = new FileReader();\n        fileReader.onloadend = handleFileRead;\n        fileReader.readAsText(file);\n    };\n\n    const onInputChange = (e) => {\n        if (inputType === \"text\") {\n            onChange(name, e.target.value)\n            return\n        }\n        if (!e.target.files || e.target.files.length === 0 || e.target.files[0] === null)\n            return\n        setLoading(true)\n        handleFileChosen(e.target.files[0])\n    }\n\n\n    return (\n        <div className=\"inputContainer\">\n            <label>{label}</label>\n            <input className=\"input\" id={name} name={name} type={inputType} accept=\".csv\" onChange={onInputChange}/>\n            {loading && <Spinner/>}\n        </div>\n    )\n}\n\nexport default LabeledInput\n","export const ACCOUNT_NUMBERS = [\n    401,\n    4111,\n    403,\n    404,\n    408,\n    413,\n    4091,\n    4092,\n    418,\n    419,\n    461,\n    462\n]\n\nexport const ACCOUNTS_INITIAL_VALUE = () => {\n    const obj = {}\n    ACCOUNT_NUMBERS.forEach(n => obj[`acc${n}`] = '')\n    return obj\n}\n","import React, {useEffect, useState} from \"react\"\nimport LabeledInput from \"./LabeledInput\";\nimport {ACCOUNT_NUMBERS, ACCOUNTS_INITIAL_VALUE} from \"../constants\";\n\nconst initialState = {\n    name: '',\n    doc401: '',\n    acc4111: '',\n    acc404: '',\n    acc462: '',\n    acc461: '',\n    acc408: '',\n    acc418: '',\n    acc403: '',\n    acc413: '',\n    acc4091: '',\n    acc4092: '',\n    acc419: '',\n    balanta: '',\n    catalog: ''\n}\n\nconst formInitialState = {\n    name: '',\n    balanta: '',\n    catalog: '',\n    ...ACCOUNTS_INITIAL_VALUE()\n}\n\nconst Form = ( { onGenerate, onReset }) => {\n    const [inputs, setInputs] = useState(formInitialState)\n    const [disabled, setDisabled] = useState(false)\n\n    useEffect(() => {\n        const {name, balanta, acc401, acc4111, catalog } = inputs\n        if (!name || !acc401 || !acc4111 || !balanta || !catalog) {\n            setDisabled(true)\n        } else {\n            setDisabled(false)\n        }\n    }, [inputs])\n\n    const generate = () => {\n        onGenerate(inputs)\n    }\n\n    const onChange = (name, value) => {\n        setInputs({\n            ...inputs,\n            [name]: value\n        })\n    }\n    const reset = () => {\n        onReset()\n        setInputs(initialState)\n        const els = document.getElementsByClassName('input')\n        for (let i = 0; i < els.length; i++)\n            els[i].value = null\n\n    }\n\n    return (\n        <div className=\"form\">\n            <LabeledInput name=\"name\" label=\"Nume(scurt, fara spatii)\" type=\"text\" onChange={onChange}/>\n            <LabeledInput name=\"catalog\" label=\"Fisier Catalog Parteneri\" onChange={onChange}/>\n            <LabeledInput name=\"balanta\" label=\"Fisier Balanta\" onChange={onChange}/>\n            {\n                ACCOUNT_NUMBERS.map(n => (\n                    <LabeledInput key={n} name={`acc${n}`} label={`Fisier ${n}`} onChange={onChange}/>\n                ))\n            }\n            <div className=\"buttonContainer\">\n                <button disabled={disabled} onClick={generate}>Generate migration files</button>\n                <button onClick={reset}>Reset inputs</button>\n            </div>\n        </div>\n    )\n}\n\nexport default Form;\n","import {ACCOUNT_NUMBERS} from \"./constants\";\n\nconst START_LINE_4XX = 14\n\nconst cleanFile = (file, startLine, cols) => {\n    if (!file) return null\n    const lines = file.split(/\\r?\\n/);\n\n    const cleanLines = []\n\n    for (let i = startLine; i < lines.length; i++) {\n        let split = lines[i].split(',')\n        split = split.filter(i => !!i)\n\n        if (split.length === cols) {\n            cleanLines.push(split.slice(1, split.length).map(s => s.trim()))\n        }\n    }\n    return cleanLines\n}\n\nconst cleanAccountFile = (file) => cleanFile(file, START_LINE_4XX, 8)\n\nfunction getCounter(index) {\n    //000001\n    const str = index.toString()\n    let buf = ''\n    for (let i = 0; i < 6 - str.length; i++) {\n        buf += '0'\n    }\n    if (index === 110) {\n        console.log(str)\n        console.log(buf.concat(str))\n    }\n    return buf.concat(str)\n}\n\nconst cleanCatalog = (catalog) => {\n    const clients = []\n    const lines = catalog.split(/\\r?\\n/);\n\n    for (let i = 3; i < lines.length; i++) {\n        let split = lines[i].split(',')\n        const name = split[0]\n        const cif = split[2]\n        if (!!name) {\n            clients.push([name.trim(), cif.trim()])\n        }\n    }\n    //Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon\n    return clients.map((client, index) => {\n        const c = getCounter(index + 1)\n        return [\n            client[0],\n            client[1],\n            `401.${c}`,\n            `404.${c}`,\n            `462.${c}`,\n            `4111.${c}`,\n            `461.${c}`,\n            `408.${c}`,\n            `418.${c}`,\n            `403.${c}`,\n            `413.${c}`,\n            `4091.${c}`,\n            `4092.${c}`,\n            `419.${c}`,\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            '',\n            ''\n        ]\n\n    })\n}\n\nfunction splitLine(line) {\n    const length = line.length\n    let i = 0;\n    let inString = false\n    const parts = []\n    let val = ''\n\n    while (i < length) {\n        if (line[i] === \"\\\"\" && !inString) {\n            inString = true\n            val = val + line[i]\n        } else if (line[i] === \"\\\"\" && inString) {\n            inString = false\n            val = val + line[i]\n        }  else if (line[i] === ',' && inString) {\n            val = val + line[i]\n        } else if (line[i] === ',' && !inString) {\n            parts.push(val)\n            val = ''\n            inString = false\n        } else {\n            val = val + line[i]\n        }\n        i++\n    }\n    parts.push(val)\n    return parts\n}\n\nconst cleanBalanta = (balanta) => {\n    const lines = balanta.split(/\\r?\\n/)\n    const cleanLines = []\n    for (let i = 1; i < lines.length; i++) {\n        cleanLines.push(splitLine(lines[i]).map(s => s.trim()))\n    }\n\n    const requiredAccounts = ACCOUNT_NUMBERS.map(n => n.toString())\n\n    const presentAccounts = []\n\n    for (let i = 0; i < cleanLines.length; i++) {\n        if (requiredAccounts.includes(cleanLines[i][0])) {\n            presentAccounts.push(cleanLines[i][0])\n        }\n    }\n\n    return {\n        cleanLines,\n        presentAccounts\n    };\n}\n\nexport {\n    cleanAccountFile,\n    cleanCatalog,\n    cleanBalanta\n}\n\n\n","const Instructions = () => {\n    return (\n        <>\n            <p className=\"subtitle\">Pregatim local un folder cu numele [FIRMA] Migrare Smarbill</p>\n            <p className=\"subtitle\">Pregatim in drive un folder \"[FIRMA] Migrare SBC 01.10.2020\" in folderul clientului</p>\n            <p className=\"subtitle\">Scoatem accesul clientului la folderul de mai sus</p>\n            <p className=\"subtitle\">1. Balanta de verificare:</p>\n            <ul>\n                {/*<li>Pregatim local un folder cu numele [FIRMA] Migrare SBC (1)</li>*/}\n                <li>Export din Prosoft balanta pe perioada 01.01.2020 - pana inclusiv luna precedenta (30.09.2020)  fata de cea preluata</li>\n                <ul>\n                    <li>Creare Raport > Doar 8/9 sau export XLS > Export Excel > Excel in stanga sus</li>\n                    <li>File name: [FIRMA]_Balanta_01.01.2020-30.09.2020</li>\n                </ul>\n                <li>Il incarcam in folderul denumit \"[FIRMA] Migrare SBC 01.10.2020\" in Drive in folderul clientului</li>\n                <li>Il deschidem si il descarcam in format .csv in folderul local</li>\n                <li>File -> Download As -> Comma Separated Values (.csv)</li>\n            </ul>\n            <p className=\"subtitle\">2. Parteneri</p>\n            <ul>\n                <li>Export din Prosoft</li>\n                <li>Catalog parteneri > Printare lista parteneri > Raport > Export To > CSV File > Text Separator , (virgula) > OK</li>\n                <li>Salvam in folderul local cu denumirea [FIRMA]_CATALOG_PARTENERI</li>\n            </ul>\n            <p className=\"subtitle\">3. Furnizori si clienti (NR_CONT 401 sau 4111)</p>\n            <ul>\n                <li>Export din Prosoft Fisa pe cont pe perioada 01.01.2020 - pana inclusiv luna precedenta (30.09.2020)  fata de cea preluata</li>\n                <li>NR_CONT > Balanta pe cont analitic > Globala > Balanta analitica > Export Report > Format \"Microsoft Exxcel (97-2003 (*xsls)\" > cu denumirea \" CEDEXPERT_Fisa[NR_CONT]</li>\n                <li>Il incarcam in folderul denumit \"[FIRMA] Migrare SBC 01.10.2020\" in Drive in folderul clientului</li>\n                <li>Il deschidem si il descarcam in format .csv in folderul local</li>\n                <li>File -> Download As -> Comma Separated Values (.csv)</li>\n            </ul>\n            <p className=\"subtitle\">4. Alte conturi - 403, 404, 408, 4091, 4092, 413, 418, 419</p>\n            <ul>\n                <li>Daca exista alte conturi din lista de mai sus in balanta, se urmeaza pt fiecare din ele aceeasi procedura ca pt 401/4111</li>\n                <li>Pro tip: Softul de migrare va detecta daca exista alte conturi, si va va atentiona</li>\n            </ul>\n            <p className=\"subtitle\">5. Obtinere fisiere migrate</p>\n            <ul>\n                <li>Incarcam din folderul local fisierele .csv in campurile potrivite </li>\n                <li>Click pe \"Generate Migration Files\"</li>\n                <li>Click pe \"Download migration files\"</li>\n                <li>Salvam local fisierele primite</li>\n                <li>In modelul de trezorerie de\n                    <a href=\"https://docs.google.com/spreadsheets/d/1gLmwB8q2gE_DZnKKk3Le8832-5Fz3av-can0-GwCIz4/edit?usp=sharing\" target=\"_blank\">\n                        aici\n                    </a> completam cate un rand pt fiecare cont din lista primita din pasul precedent\n                </li>\n                <li>Se descarca fisierul trezo (format xslx) in folderul local</li>\n            </ul>\n            <p className=\"subtitle\">6. Import in smartbill</p>\n            <ul>\n                <li>Create client prin formularul smartbill (input CUI)</li>\n                <li>Accesam contabilitate pt clientul dorit</li>\n                <li>Configurari -> Importa date initiale -> Importa din excel</li>\n                <li>Se selecteaza luna cu care incepe utilizarea</li>\n                <li>Se incarca fisierele obtinute la pasul 5</li>\n                <li>Pt fiecare fisier se apasa butonul \"Incarca si valideaza\" </li>\n                <li>Se apasa butonul \"Importa datele\"</li>\n            </ul>\n            <p className=\"subtitle\">7. Verificare</p>\n            <ul>\n                <li>Se intra in Smartbill la Rapoarte -> Balanta -> Perioada data importului -> Tip balanta Analitica -> Afiseaza</li>\n                <li>Se verifica Totalul General cu balanta importata din ProSoft</li>\n                <li>Se deschide sampania</li>\n            </ul>\n        </>\n    )\n}\n\nexport default Instructions\n","import React, {useState} from \"react\"\nimport './App.css';\nimport Form from \"./smartbill/Form\";\nimport {cleanAccountFile, cleanBalanta, cleanCatalog} from \"./cleaner\";\nimport {generateBalanta} from \"./generator\";\nimport {ACCOUNT_NUMBERS} from \"./constants\";\nimport Instructions from \"./smartbill/Instructions\";\n\nconst catalogHeader = 'Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon'\nconst balantaHeader = 'Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare'\nconst trezoHeader = 'Contul Contabil'\n\nconst App = () => {\n\n  const [company, setCompany] = useState('')\n  const [catalog, setCatalog ] = useState(null)\n  const [balanta, setBalanta ] = useState(null)\n  const [trezo, setTrezo] = useState(null)\n\n  const reset = () => {\n    setCatalog(null)\n    setBalanta(null)\n    setTrezo(null)\n  }\n\n  const downloadCatalog = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([catalog], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Catalog.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n\n  const downloadBalanta = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([balanta], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Balanta.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n  const downloadTrezo = () => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([trezo], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = `${company}Trezo.csv`;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n\n  const generate = (values) => {\n    setCompany(values.name)\n\n    const cleanAccounts = {}\n\n    ACCOUNT_NUMBERS.forEach(n => {\n      const keyName = `acc${n}`\n      const dirtyAcc = values[keyName]\n      cleanAccounts[keyName] = cleanAccountFile(dirtyAcc)\n    })\n\n    const fCatalog = cleanCatalog(values.catalog)\n    const { cleanLines: fBalanta, presentAccounts } = cleanBalanta(values.balanta)\n\n    let all = true\n    for (let i = 0; i < presentAccounts.length; i++) {\n      const keyName = `acc${presentAccounts[i]}`\n      if (!values[keyName]) {\n        all = false\n      }\n    }\n\n    if (!all) {\n      window.alert(`Conform balantei, este nevoie de fisiere pt conturile: ${presentAccounts.join(\",\")}`)\n      return\n    }\n\n    const { balanta, trezo } = generateBalanta(cleanAccounts, fCatalog, fBalanta)\n\n    const catalogFileContent = catalogHeader\n        .concat('\\n')\n        .concat(fCatalog.map(line => line.join('|')).join('\\n'))\n\n    setCatalog(catalogFileContent)\n\n    const balantaFileContent = balantaHeader\n        .concat('\\n')\n        .concat(balanta.map(line => line.join('|')).join('\\n'))\n        .replace(/\"/g,'')\n        .replace(/,/g, '')\n    setBalanta(balantaFileContent)\n\n    const trezoFileContent = trezoHeader\n        .concat('\\n')\n        .concat(trezo.join('\\n'))\n        .replace(/\"/g,'')\n\n    setTrezo(trezoFileContent)\n\n  }\n\n  const downloadFiles = () => {\n    downloadCatalog()\n    downloadBalanta()\n    downloadTrezo()\n  }\n\n\n\n  return (\n    <div className=\"App\">\n      <div className=\"left\">\n      <Form onGenerate={generate} onReset={reset}/>\n      <div className=\"outputs\">\n        <button disabled={catalog === null} onClick={downloadFiles}>Download migration files</button>\n        {/*<button disabled={balanta === null} onClick={downloadBalanta}>Download fisier balanta</button>*/}\n        {/*<button disabled={trezo === null} onClick={downloadTrezo}>Download fisier Trezo</button>*/}\n      </div>\n      <span style={{marginTop: '50px', fontSize: '12px', color: 'white'}}>v0.13</span>\n    </div>\n      <div className=\"right\">\n        <p>Instructiuni</p>\n        <Instructions/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/*\n\n */\n\nimport {ACCOUNT_NUMBERS} from \"./constants\";\n\n/*\n      const keyName = `acc${n}`\n      cleanAccounts[keyName]\n */\n\nexport const generateBalanta = (accounts, fileCatalogLines, fileBalantaLines) => {\n    const entitiesWithName = {}\n    Object.keys(accounts).forEach(key => {\n        if (accounts[key] === null) {\n            entitiesWithName[key] = null\n        } else {\n            entitiesWithName[key] = accounts[key].map(split => ({\n                name: split[0],\n                siDebit: split[1],\n                siCredit: split[2],\n                rDebit: split[3],\n                rCredit: split[4],\n                sFlDebit: split[5],\n                sFCredit: split[6]\n            }))\n\n        }\n    })\n\n    const mapAccounts = {}\n    ACCOUNT_NUMBERS.forEach(n => {\n        mapAccounts[`acc${n}`] = {}\n    })\n\n    /*\n     0      client[0],\n     1      client[1],\n\n     2      `401.${c}`,\n\n     3      `404.${c}`,\n\n     4      `462.${c}`,\n\n     5      `4111.${c}`,\n\n     6      `461.${c}`,\n\n     7      `408.${c}`,\n\n     8      `418.${c}`,\n\n     9      `403.${c}`,\n\n     10      `413.${c}`,\n\n     11      `4091.${c}`,\n\n     12      `4092.${c}`,\n\n     13      `419.${c}`,\n\n     */\n\n    fileCatalogLines.forEach(split => {\n        const entity = {\n            name: split[0],\n            cif: split[1],\n            acc401: split[2],\n            acc404: split[3],\n            acc462: split[4],\n            acc4111: split[5],\n            acc461: split[6],\n            acc408: split[7],\n            acc418: split[8],\n            acc403: split[9],\n            acc413: split[10],\n            acc4091: split[11],\n            acc4092: split[12],\n            acc419: split[13],\n        }\n        ACCOUNT_NUMBERS.forEach(n => {\n            mapAccounts[`acc${n}`][entity.name] = entity[`acc${n}`]\n        })\n    })\n\n    // Reading Balanta file\n    // 0 Cont\n    // 1 AP\n    // 2 Den_cont\n    // 3 SIAD\n    // 4 SIAC\n    // 5 RPD\n    // 6 RPC\n    // 7 RLCD\n    // 8 RLCC\n    // 9 RCD\n    // 10 RCC\n    // 11 TVD\n    // 12 TVC\n    // 13 SFD\n    // 14 SFC\n    // 15 Unitate\n\n    let linesToKeep = []\n\n    const getAccountLines = (n) => {\n        if (!entitiesWithName[`acc${n}`])\n            return null\n        const linesForAcc = []\n        entitiesWithName[`acc${n}`].forEach(client => {\n            const cod = mapAccounts[`acc${n}`][client.name]\n            linesForAcc.push([cod, client.name, client.siDebit,\n                client.siCredit, client.rDebit,\n                client.rCredit, client.sFlDebit,\n                client.sFCredit])\n        })\n        return linesForAcc\n    }\n\n    let row441 = []\n    let row4418 = []\n\n    const trezo = []\n\n    for (let i = 0; i < fileBalantaLines.length; i++) {\n        const split = fileBalantaLines[i]\n        const keep = [split[0], split[2], split[3], split[4], split[11], split[12], split[13], split[14]]\n\n        const accNr = split[0]\n\n        if (accNr && accNr.includes('CLASA')) {\n            continue\n        }\n\n        if (accNr && accNr.includes('TOT')) {\n            continue\n        }\n\n        // 408D pastram\n        // 5121.1 pastram\n        // pastram randurile din balanta care au conturile de genul 408D? DA\n        // 441 trece in 4418\n\n        if (accNr === '441') {\n            row441 = keep\n            continue\n        }\n\n        if (accNr === '4418') {\n            row4418 = keep\n            continue\n        }\n\n        if (accNr === '5121') {\n            keep[0] = '5121.001'\n        }\n\n        if (accNr === '5124') {\n            keep[0] = '5124.001'\n        }\n\n        if (accNr.startsWith('5') && accNr !== '581' && accNr !== '5311') {\n            trezo.push(keep[0])\n        }\n\n        const analyticLines = getAccountLines(accNr)\n        if (analyticLines) {\n            linesToKeep = linesToKeep.concat(analyticLines)\n        } else {\n            linesToKeep.push(keep)\n        }\n    }\n\n    if (row441.length > 0 && row4418.length === 0) {\n        row441[0] = '4418'\n        linesToKeep.push(row441)\n    } else if (row441.length > 0 && row4418.length > 0) {\n        for (let i = 2; i < row4418.length; i++) {\n            const left = row4418[i].replace(/\"/g, \"\").replace(/,/g, \"\")\n            const right = row441[i].replace(/\"/g, \"\").replace(/,/g, \"\")\n            row4418[i] = parseFloat(left) + parseFloat(right)\n        }\n        linesToKeep.push(row4418)\n    } else if (row441.length === 0 && row4418.length > 0) {\n        linesToKeep.push(row4418)\n    }\n\n    return {\n        balanta: linesToKeep,\n        trezo\n    }\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}