(this.webpackJsonpsmartbill=this.webpackJsonpsmartbill||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(6),i=n.n(o),l=(n(12),n(2)),u=(n(13),n(3)),s=n(4),f=(n(14),function(){return Object(a.jsxs)("div",{className:"lds-ring",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})}),b=function(e){var t,n=e.label,r=e.name,o=e.type,i=e.onChange,u=Object(c.useState)(!1),s=Object(l.a)(u,2),b=s[0],d=s[1],j=o||"file",p=function(e){var n=t.result;i(r,n),d(!1)};return Object(a.jsxs)("div",{className:"inputContainer",children:[Object(a.jsx)("label",{children:n}),Object(a.jsx)("input",{className:"input",id:r,name:r,type:j,onChange:function(e){var n;"text"!==j?e.target.files&&0!==e.target.files.length&&null!==e.target.files[0]&&(d(!0),n=e.target.files[0],(t=new FileReader).onloadend=p,t.readAsText(n)):i(r,e.target.value)}}),b&&Object(a.jsx)(f,{})]})},d=[401,4111,403,404,408,413,4091,4092,418,419,461,462],j={name:"",doc401:"",acc4111:"",acc404:"",acc462:"",acc461:"",acc408:"",acc418:"",acc403:"",acc413:"",acc4091:"",acc4092:"",acc419:"",balanta:"",catalog:""},p=Object(s.a)({name:"",balanta:"",catalog:""},function(){var e={};return d.forEach((function(t){return e["acc".concat(t)]=""})),e}()),h=function(e){var t=e.onGenerate,n=e.onReset,r=Object(c.useState)(p),o=Object(l.a)(r,2),i=o[0],f=o[1],h=Object(c.useState)(!1),m=Object(l.a)(h,2),v=m[0],g=m[1];Object(c.useEffect)((function(){var e=i.name,t=i.balanta,n=i.acc401,a=i.acc4111,c=i.catalog;g(!(e&&n&&a&&t&&c))}),[i]);var O=function(e,t){f(Object(s.a)(Object(s.a)({},i),{},Object(u.a)({},e,t)))};return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)(b,{name:"name",label:"Nume(scurt, fara spatii)",type:"text",onChange:O}),Object(a.jsx)(b,{name:"catalog",label:"Fisier Catalog Parteneri",onChange:O}),Object(a.jsx)(b,{name:"balanta",label:"Fisier Balanta",onChange:O}),d.map((function(e){return Object(a.jsx)(b,{name:"acc".concat(e),label:"Fisier ".concat(e),onChange:O},e)})),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)("button",{disabled:v,onClick:function(){t(i)},children:"Generate migration files"}),Object(a.jsx)("button",{onClick:function(){n(),f(j);for(var e=document.getElementsByClassName("input"),t=0;t<e.length;t++)e[t].value=null},children:"Reset inputs"})]})]})};var m=function(e){for(var t=[],n=e.split(/\r?\n/),a=3;a<n.length;a++){var c=n[a].split(","),r=c[0],o=c[2];r&&t.push([r.trim(),o.trim()])}return t.map((function(e,t){var n=function(e){for(var t=e.toString(),n="",a=0;a<6-t.length;a++)n+="0";return 110===e&&(console.log(t),console.log(n.concat(t))),n.concat(t)}(t+1);return[e[0],e[1],"401.".concat(n),"404.".concat(n),"462.".concat(n),"4111.".concat(n),"461.".concat(n),"408.".concat(n),"418.".concat(n),"403.".concat(n),"413.".concat(n),"4091.".concat(n),"4092.".concat(n),"419.".concat(n),"","","","","","","","","","","","",""]}))};function v(e){for(var t=e.length,n=0,a=!1,c=[],r="";n<t;)'"'!==e[n]||a?'"'===e[n]&&a?(a=!1,r+=e[n]):","===e[n]&&a||","!==e[n]||a?r+=e[n]:(c.push(r),r="",a=!1):(a=!0,r+=e[n]),n++;return c.push(r),c}var g=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),i=Object(l.a)(o,2),u=i[0],s=i[1],f=Object(c.useState)(null),b=Object(l.a)(f,2),j=b[0],p=b[1],g=Object(c.useState)(null),O=Object(l.a)(g,2),x=O[0],C=O[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(h,{onGenerate:function(e){r(e.name);var t={};d.forEach((function(n){var a="acc".concat(n),c=e[a];t[a]=function(e,t,n){if(!e)return null;for(var a=e.split(/\r?\n/),c=[],r=t;r<a.length;r++){var o=a[r].split(",");(o=o.filter((function(e){return!!e}))).length===n&&c.push(o.slice(1,o.length).map((function(e){return e.trim()})))}return c}(c,14,8)}));for(var n=m(e.catalog),a=function(e){for(var t=e.split(/\r?\n/),n=[],a=1;a<t.length;a++)n.push(v(t[a]).map((function(e){return e.trim()})));for(var c=d.map((function(e){return e.toString()})),r=[],o=0;o<n.length;o++)c.includes(n[o][0])&&r.push(n[o][0]);return{cleanLines:n,presentAccounts:r}}(e.balanta),c=a.cleanLines,o=a.presentAccounts,i=!0,l=0;l<o.length;l++){var u="acc".concat(o[l]);e[u]||(i=!1)}if(i){var f=function(e,t,n){var a={};Object.keys(e).forEach((function(t){null===e[t]?a[t]=null:a[t]=e[t].map((function(e){return{name:e[0],siDebit:e[1],siCredit:e[2],rDebit:e[3],rCredit:e[4],sFlDebit:e[5],sFCredit:e[6]}}))}));var c={};d.forEach((function(e){c["acc".concat(e)]={}})),t.forEach((function(e){var t={name:e[0],cif:e[1],acc401:e[2],acc404:e[3],acc462:e[4],acc4111:e[5],acc461:e[6],acc408:e[7],acc418:e[8],acc403:e[9],acc413:e[10],acc4091:e[11],acc4092:e[12],acc419:e[13]};d.forEach((function(e){c["acc".concat(e)][t.name]=t["acc".concat(e)]}))}));for(var r=[],o=function(e){if(!a["acc".concat(e)])return null;var t=[];return a["acc".concat(e)].forEach((function(n){var a=c["acc".concat(e)][n.name];t.push([a,n.name,n.siDebit,n.siCredit,n.rDebit,n.rCredit,n.sFlDebit,n.sFCredit])})),t},i=[],l=[],u=[],s=0;s<n.length;s++){var f=n[s],b=[f[0],f[2],f[3],f[4],f[11],f[12],f[13],f[14]],j=f[0];if((!j||!j.includes("CLASA"))&&(!j||!j.includes("TOT")))if("441"!==j)if("4418"!==j){"5121"===j&&(b[0]="5121.001"),"5124"===j&&(b[0]="5124.001"),j.startsWith("5")&&"581"!==j&&"5311"!==j&&u.push(b[0]);var p=o(j);p?r=r.concat(p):r.push(b)}else l=b;else i=b}if(i.length>0&&0===l.length)i[0]="4418",r.push(i);else if(i.length>0&&l.length>0){for(var h=2;h<l.length;h++){var m=l[h].replace(/"/g,"").replace(/,/g,""),v=i[h].replace(/"/g,"").replace(/,/g,"");l[h]=parseFloat(m)+parseFloat(v)}r.push(l)}else 0===i.length&&l.length>0&&r.push(l);return{balanta:r,trezo:u}}(t,n,c),b=f.balanta,j=f.trezo,h="Denumire partener|CIF|401|404|462|4111|461|408|418|403|413|4091|4092|419|Platitor de TVA|TVA la incasare|Tara|Judetul|Reg com|Adresa|Localitate|Banca|Iban|Cod partener|Email|Pers contact|Telefon".concat("\n").concat(n.map((function(e){return e.join("|")})).join("\n"));s(h);var g="Contul|Denumire cont|Solduri initiale an debitoare|Solduri initiale an creditoare|Rulaje totale debitoare|Rulaje totale creditoare|Solduri finale debitoare|Solduri finale creditoare".concat("\n").concat(b.map((function(e){return e.join("|")})).join("\n")).replace(/"/g,"").replace(/,/g,"");p(g);var O="Contul Contabil".concat("\n").concat(j.join("\n")).replace(/"/g,"");C(O)}else window.alert("Conform balantei, este nevoie de fisiere pt conturile: ".concat(o.join(",")))},onReset:function(){s(null),p(null),C(null)}}),Object(a.jsx)("div",{className:"outputs",children:Object(a.jsx)("button",{disabled:null===u,onClick:function(){!function(){var e=document.createElement("a"),t=new Blob([u],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="".concat(n,"Catalog.csv"),document.body.appendChild(e),e.click()}(),function(){var e=document.createElement("a"),t=new Blob([j],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="".concat(n,"Balanta.csv"),document.body.appendChild(e),e.click()}(),function(){var e=document.createElement("a"),t=new Blob([x],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="".concat(n,"Trezo.csv"),document.body.appendChild(e),e.click()}()},children:"Download migration files"})}),Object(a.jsx)("span",{style:{marginTop:"50px",fontSize:"12px",color:"white"},children:"v0.12"})]})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.161f5c7f.chunk.js.map